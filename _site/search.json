[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Project Daylight: Analysing the Recycling Stations in Hong Kong",
    "section": "",
    "text": "Welcome to our website dedicated to our IS415 Geospatial Analytics project! Here, we embark on an exploration of spatial data analysis, leveraging cutting-edge techniques to glean insights from geographic information. Our journey involves delving into diverse datasets, uncovering patterns, and drawing meaningful conclusions. \nTo have a better idea on the government’s effort on waste reduction in Hong Kong, we would like to focus on the GREEN@COMMUNITY initiative promoted by the Environmental Protection Department of Hong Kong. As at mid-February 2024, a total of 11 Recycling Stations, 40 Recycling Stores and over 130 Recycling Spots have been set up throughout the 18 districts in Hong Kong under GREEN@COMMUNITY for the collection of nine common types of recyclables (LCQ17: Promoting Waste Reduction and Recycling, 2024) In our project, we will be analysing the locations of these and evaluate if the coverage of this initiative is sufficient. To go beyond, we will try to come up with solutions on where to add new recycling stations. In the Shiny Application, we will be creating an interactive map with features that users can zoom in/out on the map, do filtering of results and searching functions. \n\n\n\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site"
  },
  {
    "objectID": "Proposal/proposal.html",
    "href": "Proposal/proposal.html",
    "title": "Our Proposal",
    "section": "",
    "text": "In the Waste Blueprint 2035 by the Environmental Protection Department (EPD) in 2021, Hong Kong aims to reach a 55% recovery rate as a mid-term target. As of 2022, Hong Kong is at 32% recovery rate. To reach the target in around 10 years time, Hong Kong has to make more efforts in achieving the target in time. \nGiven Hong Kong has a very high population density, with 6,740 people per square kilometre , there is a pressing need to assess the distribution and accessibility of recycling stations across the islands. This geospatial analysis aims to investigate whether there are a sufficient number of recycling stations located throughout Hong Kong to effectively serve its population. \nBy examining the spatial distribution of existing recycling facilities in relation to population, residential areas, and commercial districts, this study seeks to identify potential gaps in coverage and areas with inadequate access to recycling services. The findings will provide valuable insights for policymakers, urban planners, and waste management authorities to optimise the placement and allocation of recycling infrastructure, ultimately fostering greater participation in recycling efforts and contributing to sustainable waste management practices in Hong Kong."
  },
  {
    "objectID": "Proposal/proposal.html#abstract",
    "href": "Proposal/proposal.html#abstract",
    "title": "Our Proposal",
    "section": "",
    "text": "To have a better idea on the government’s effort on waste reduction in Hong Kong, we would like to focus on the GREEN@COMMUNITY initiative promoted by the Environmental Protection Department of Hong Kong. As at mid-February 2024, a total of 11 Recycling Stations, 40 Recycling Stores and over 130 Recycling Spots have been set up throughout the 18 districts in Hong Kong under GREEN@COMMUNITY for the collection of nine common types of recyclables including plastics, glass containers, small electrical appliances, regulated electrical equipment, fluorescent lamps/tubes, rechargeable batteries, beverage cartons, waste paper and metals. (LCQ17: Promoting Waste Reduction and Recycling, 2024)"
  },
  {
    "objectID": "Proposal/proposal.html#problem-statement",
    "href": "Proposal/proposal.html#problem-statement",
    "title": "Our Proposal",
    "section": "Problem Statement",
    "text": "Problem Statement\nIn the Waste Blueprint 2035 by the Environmental Protection Department (EPD) in 2021, Hong Kong aims to reach a 55% recovery rate as a mid-term target. As of 2022, Hong Kong is at 32% recovery rate. To reach the target in around 10 years time, Hong Kong has to make more efforts in achieving the target in time. \nGiven Hong Kong has a very high population density, with 6,740 people per square kilometre , there is a pressing need to assess the distribution and accessibility of recycling stations across the islands. This geospatial analysis aims to investigate whether there are a sufficient number of recycling stations located throughout Hong Kong to effectively serve its population. \nBy examining the spatial distribution of existing recycling facilities in relation to population, residential areas, and commercial districts, this study seeks to identify potential gaps in coverage and areas with inadequate access to recycling services. The findings will provide valuable insights for policymakers, urban planners, and waste management authorities to optimise the placement and allocation of recycling infrastructure, ultimately fostering greater participation in recycling efforts and contributing to sustainable waste management practices in Hong Kong."
  },
  {
    "objectID": "Proposal/proposal.html#objectives-goals",
    "href": "Proposal/proposal.html#objectives-goals",
    "title": "Our Proposal",
    "section": "Objectives Goals",
    "text": "Objectives Goals\n\nEDA : reveals the low and high density recycling areas. We can target these areas that are lower in density, figure out the problem of the low recycling and think of solutions to encourage this good habit.\nSpatial Point analysis \n\nFirst-order (KDE) : Provides insights to the underlying distribution of the data and we can figure out what is causing the low recycling rate, or even test with hypothesis testing.\nSecond-order (G-Function, F-Function, K-Function) : Quantify the distance of the recycling stations between one another and describe how dispersed the locations are.\n\nNetwork Constrained Spatial Point Pattern Analysis: Geographical analysis understanding the spatial distribution of events within the context of the network structure, enabling insights and decision-making in various domains of the solution to the recycling problem."
  },
  {
    "objectID": "Proposal/proposal.html#data-sets",
    "href": "Proposal/proposal.html#data-sets",
    "title": "Our Proposal",
    "section": "Data sets",
    "text": "Data sets\n\n\n\nTitle\nSources\nLink\n\n\n\n\n2021 Population Census Statistics (By District Council District)\nDATA.GOV.HK.\nhttps://data.gov.hk/en-data/dataset/hk-censtatd-census_geo-2021-population-census-by-dcd/resource/27beef7f-5995-4b79-b3a9-26352c852fda \n\n\nWaste Less Recycling Collection Point (By Environmental Protection Department)\nDATA.GOV.HK.\nhttps://data.gov.hk/en-data/dataset/hk-epd-recycteam-waste-less-recyclable-collection-points-data \n\n\nLand area, mid-year population and population density (By District Council district)\nCommon Spatial Data Infrastructure (CSDI) - Census and Statistical Department\nhttps://portal.csdi.gov.hk/geoportal/#metadataInfoPanel\n\n\nDistrict Boundary\nCommon Spatial Data Infrastructure (CSDI) - Home Affairs Department\nhttps://portal.csdi.gov.hk/geoportal/?lang=en&datasetId=had_rcd_1634523272907_75218\n\n\nDigital Planning Data of Regulated Areas\nCommon Spatial Data Infrastructure (CSDI) - Planning Department\nhttps://portal.csdi.gov.hk/geoportal/?lang=en&datasetId=c17a8a39-4fed-5e02-8528-998b84011228"
  },
  {
    "objectID": "Proposal/proposal.html#literature-review",
    "href": "Proposal/proposal.html#literature-review",
    "title": "Our Proposal",
    "section": "Literature Review",
    "text": "Literature Review\n\n\n\nTitle\nSummarize\nSources\n\n\n\n\nWith Hong Kong running out of space for its trash, residents are doing more to reduce food waste\nThis article talks about how Hong Kong does not have enough space for landfills due to their country’s size and also because of the trouble people have to go through to recycle, which prevents them from cultivating such good habits.\nhttps://www.channelnewsasia.com/asia/hong-kong-landfills-running-out-space-3217566\n\n\nHow Hong Kong’s already-serious waste problem has got worse during the pandemic\nThis article talks about how the recycling problem in Hong Kong has been a pressing issue in the state since 1997 and it is only getting worse for them due to the lack of effort and limited land space.\nhttps://www.scmp.com/comment/opinion/article/3160067/how-hong-kongs-already-serious-waste-problem-has-got-worse-during \n\n\nWASTE BLUEPRINT for Hong Kong 2035 Environmental Protection Department. (n.d.).\nThe goals and targets that HKGOV wish to reach in terms of waste reduction in 2035.\nhttps://www.eeb.gov.hk/sites/default/files/pdf/waste_blueprint_2035_eng.pdf\n\n\nMONITORING OF SOLID WASTE IN HONG KONG Waste Statistics for 2022 Environmental Protection Department. (n.d.).\nThe statistics of HK in solid waste in 2022.\nhttps://www.wastereduction.gov.hk/sites/default/files/resources_centre/waste_statistics/msw2022_eng.pdf"
  },
  {
    "objectID": "Proposal/proposal.html#timeline",
    "href": "Proposal/proposal.html#timeline",
    "title": "Our Proposal",
    "section": "Timeline",
    "text": "Timeline\n\n\n\nWeek\nMilestones\n\n\n\n\n8\nData Cleaning, EDA \n\n\n9\nSpatial Point analysis, First Order\n\n\n10\nSpatial Point analysis, Second Order\n\n\n11\nNetwork Constrained Spatial Point Pattern Analysis\n\n\n12\nFinishing up and tidying up\n\n\n13\nFinalizing, printing the poster\n\n\n14\nPresentation"
  },
  {
    "objectID": "Proposal/proposal.html#problem-statement-motivation",
    "href": "Proposal/proposal.html#problem-statement-motivation",
    "title": "Our Proposal",
    "section": "",
    "text": "In the Waste Blueprint 2035 by the Environmental Protection Department (EPD) in 2021, Hong Kong aims to reach a 55% recovery rate as a mid-term target. As of 2022, Hong Kong is at 32% recovery rate. To reach the target in around 10 years time, Hong Kong has to make more efforts in achieving the target in time. \nGiven Hong Kong has a very high population density, with 6,740 people per square kilometre , there is a pressing need to assess the distribution and accessibility of recycling stations across the islands. This geospatial analysis aims to investigate whether there are a sufficient number of recycling stations located throughout Hong Kong to effectively serve its population. \nBy examining the spatial distribution of existing recycling facilities in relation to population, residential areas, and commercial districts, this study seeks to identify potential gaps in coverage and areas with inadequate access to recycling services. The findings will provide valuable insights for policymakers, urban planners, and waste management authorities to optimise the placement and allocation of recycling infrastructure, ultimately fostering greater participation in recycling efforts and contributing to sustainable waste management practices in Hong Kong."
  },
  {
    "objectID": "Proposal/proposal.html#feature-of-our-application",
    "href": "Proposal/proposal.html#feature-of-our-application",
    "title": "Our Proposal",
    "section": "Feature of our Application",
    "text": "Feature of our Application\nOut application will include an interactive map display for users to look out for nearby recycling locations under the GREEN@Community initiative. Users can zoom in and out on the map to have a better idea on their locations. They can filter out different recycling locations by selecting which districts/ neighbourhoods they wish to visit. The app will also allow users to search in a search bar for a specific location. The data in the app will help the Hong Kong government to understand citizens’ recycling habits to encourage them more through their lifestyle."
  },
  {
    "objectID": "Proposal/proposal.html#references",
    "href": "Proposal/proposal.html#references",
    "title": "Our Proposal",
    "section": "References",
    "text": "References\n\nLCQ17: Promoting waste reduction and recycling. (2024). Info.gov.hk. https://www.info.gov.hk/gia/general/202402/28/P2024022800418.htm ‌\nLCQ12: Operation of the community recycling network GREEN@COMMUNITY. (2023). Info.gov.hk. https://www.info.gov.hk/gia/general/202402/28/P2024022800306.htm\nGovHK (www.gov.hk. (2024, January 16). GovHK: Hong Kong – the Facts. Www.gov.hk. https://www.gov.hk/en/about/abouthk/facts.htm"
  },
  {
    "objectID": "EDA/storyboard.html",
    "href": "EDA/storyboard.html",
    "title": "Storyboard",
    "section": "",
    "text": "This is will be the UI design of our Shiny App."
  },
  {
    "objectID": "EDA/storyboard.html#analysis-pages-spaa-netspaa",
    "href": "EDA/storyboard.html#analysis-pages-spaa-netspaa",
    "title": "Storyboard",
    "section": "Analysis Pages: SPAA & NETSPAA",
    "text": "Analysis Pages: SPAA & NETSPAA\nThe following 2 pages also include interactive feature such as drop-down menu for the districts that we do our analysis on."
  },
  {
    "objectID": "EDA/eda.html",
    "href": "EDA/eda.html",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "",
    "text": "pacman::p_load(arrow, lubridate, tidyverse,maptools, sf, spNetwork, raster, spatstat, tmap)"
  },
  {
    "objectID": "EDA/eda.html#importing-aspatial-data",
    "href": "EDA/eda.html#importing-aspatial-data",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Importing Aspatial Data",
    "text": "Importing Aspatial Data"
  },
  {
    "objectID": "EDA/eda.html#section",
    "href": "EDA/eda.html#section",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "1.",
    "text": "1.\n\nhk_census &lt;- read_excel(\"data/aspatial/hkcensus.xlsx\")\n\n\ncp &lt;- read_csv(\"data/aspatial/hkrecyclepoints.csv\")\n\nChange the geographic location\n\ncp_sf &lt;- st_as_sf(cp, \n                  coords = c(\"lgt\",\"lat\"), \n                  crs = 2326)\n\n\ndistrict_18 &lt;- st_read(dsn = \"data/geospatial/hk_18Districts/\",\n                       layer = \"HKDistrict18\" )\n\n\nst_crs(district_18)\n\n\ndistrict_18 &lt;- district_18 %&gt;% st_transform(crs = 2326)\n\n\nst_crs(district_18)\n\n\nplot(st_geometry(district_18))\n\n\ntmap_mode('plot')\ntm_shape(cp_sf)+\n  tm_dots()\n\n\ncp_ppp &lt;- as.ppp(cp_sf)\n\n\nsummary(cp_ppp)\n\n\nplot(cp_ppp)\n\n\nhk_owin &lt;- as.owin(district_18) \n\n\nsummary(hk_owin)\n\n\nhk_cp_ppp = cp_ppp[hk_owin]\nsummary(hk_cp_ppp)\n\n\nplot(hk_cp_ppp)\n\n\n#kde_cp_bw &lt;- density(hk_cp_ppp,\n                    #sigma=bw.diggle,\n                    #edge=TRUE,\n                    #kernel=\"gaussian\")"
  },
  {
    "objectID": "Analysis/NKDE.html",
    "href": "Analysis/NKDE.html",
    "title": "Network Kernal Density Estimation (NKDE)",
    "section": "",
    "text": "1 Getting Started\n\npacman::p_load(arrow, dplyr, lubridate, ggplot2, tidyverse, sf, sfdep, sp, spNetwork, spdep, raster, spatstat, tmap, readxl, plotly)\n\n\nosm_basemap &lt;- tm_basemap(server = \"OpenStreetMap.HOT\")\nimagery_basemap &lt;- tm_basemap(server = \"Esri.WorldImagery\")\n\n\n\n2. Importing Data\n\n2.1 Asaptial Data\n\nhk_census &lt;- read_excel(\"data/aspatial/hkcensus.xlsx\")\n\n\n\n2.2 Geospatial Data\n\n\n2.2.1 18 Districts in Hong Kong\n\ndistrict_18 &lt;- st_read(dsn = \"data/geospatial/hk_18Districts/\",\n                       layer = \"HKDistrict18\" )\n\nReading layer `HKDistrict18' from data source \n  `C:\\Users\\Kachel Lee\\ka33rina\\IS415-project\\Analysis\\data\\geospatial\\hk_18Districts' \n  using driver `ESRI Shapefile'\nSimple feature collection with 18 features and 4 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 12672060 ymin: 2529946 xmax: 12739620 ymax: 2579129\nProjected CRS: WGS 84 / Pseudo-Mercator\n\n\n\nsf_district_18 &lt;- district_18 %&gt;% st_transform(crs = 2326)\n\n\nst_crs(sf_district_18)\n\nCoordinate Reference System:\n  User input: EPSG:2326 \n  wkt:\nPROJCRS[\"Hong Kong 1980 Grid System\",\n    BASEGEOGCRS[\"Hong Kong 1980\",\n        DATUM[\"Hong Kong 1980\",\n            ELLIPSOID[\"International 1924\",6378388,297,\n                LENGTHUNIT[\"metre\",1]]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4611]],\n    CONVERSION[\"Hong Kong 1980 Grid\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",22.3121333333333,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",114.178555555556,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",1,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",836694.05,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",819069.8,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"northing (N)\",north,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1]],\n        AXIS[\"easting (E)\",east,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1]],\n    USAGE[\n        SCOPE[\"Cadastre, engineering survey, topographic mapping (large scale).\"],\n        AREA[\"China - Hong Kong - onshore and offshore.\"],\n        BBOX[22.13,113.76,22.58,114.51]],\n    ID[\"EPSG\",2326]]\n\n\n\ntmap_mode(\"plot\")\nd18_map &lt;- tm_shape(sf_district_18) +\n  tm_fill(col = \"ENAME\", title = \"District\", legend.show = FALSE) +\n  tm_borders(col = \"black\", lwd = 0.5) +\n  tm_text(\"ID\", size = 0.5, col = \"black\") +\n  tm_layout(frame = FALSE)\n\nd18_map\n\n\n\n\n\n\n2.2.2 Recycling Points in Hong Kong\n\ncp &lt;- read_csv(\"data/aspatial/hkrecyclepoints.csv\")\n\nChange the geographic location\n\ncp_sf &lt;- st_as_sf(cp, \n                  coords = c(\"lgt\",\"lat\"), \n                  crs = 4326) %&gt;% \n  st_transform(crs= 2326)\n\n\nsummary(cp_sf)\n\n     cp_id       district_id         address_en        address2_en       \n Min.   :  283   Length:6520        Length:6520        Length:6520       \n 1st Qu.: 3615   Class :character   Class :character   Class :character  \n Median : 6652   Mode  :character   Mode  :character   Mode  :character  \n Mean   : 6127                                                           \n 3rd Qu.: 8516                                                           \n Max.   :10764                                                           \n  waste_type           legend                   geometry   \n Length:6520        Length:6520        POINT        :6520  \n Class :character   Class :character   epsg:2326    :   0  \n Mode  :character   Mode  :character   +proj=tmer...:   0  \n                                                           \n                                                           \n                                                           \n\n\n\ncp_sf_1 &lt;- cp_sf %&gt;%\n  mutate(district_id = toupper(str_replace_all(district_id, \"_\", \" \")))\n\n\nrecycling_bins &lt;- subset(cp_sf_1, legend == \"Recycling Bins at Public Place\")\nrecycling_spots &lt;- subset(cp_sf_1, legend == \"Recycling Spots\")\nprivate_collection_points &lt;- subset(cp_sf_1, legend == \"Private Collection Points (e.g. housing estates, shopping centres)\")\nngo_collection_points &lt;- subset(cp_sf_1, legend == \"NGO Collection Points\")\nrecycling_stations &lt;- subset(cp_sf_1, legend == \"Recycling Stations/Recycling Stores\")\nstreet_corner_recycling_shops &lt;- subset(cp_sf_1, legend == \"Street Corner Recycling Shops\")\nsmart_bins &lt;- subset(cp_sf_1, legend == \"Smart Bin\")\n\n\nrecycling_spots_cp &lt;- st_join(sf_district_18, recycling_spots)\nngo_cp &lt;- st_join(sf_district_18, ngo_collection_points)\npcp_joined_data &lt;- st_join(sf_district_18, private_collection_points)\nrecycling_bins_cp &lt;- st_join(sf_district_18, recycling_bins)\nrecycling_stations_cp &lt;- st_join(sf_district_18, recycling_stations)\nstreet_corner_cp &lt;- st_join(sf_district_18, street_corner_recycling_shops)\nsmart_bins_cp &lt;- st_join(sf_district_18, smart_bins)\n\n\nprivate_collection_points_by_district &lt;- pcp_joined_data %&gt;%\n  group_by(ENAME) %&gt;%\n  summarize(total_pcp = n())\n\nngo_cp_by_district &lt;- ngo_cp %&gt;%\n  group_by(ENAME) %&gt;%\n  summarize(total_ngo_cp = n())\n\nrecycling_spots_by_district &lt;- recycling_spots_cp %&gt;%\n  group_by(ENAME) %&gt;%\n  summarize(total_recycling_spots = n())\n\nrecycling_bins_by_district &lt;- recycling_bins_cp %&gt;%\n  group_by(ENAME) %&gt;%\n  summarize(total_recycling_bins = n())\n\nrecycling_stations_by_district &lt;- recycling_stations_cp %&gt;%\n  group_by(ENAME) %&gt;%\n  summarize(total_recycling_stations = n())\n\nstreet_corner_shops_by_district &lt;- street_corner_cp %&gt;%\n  group_by(ENAME) %&gt;%\n  summarize(total_street_corner = n())\n\nsmart_bins_by_district &lt;- smart_bins_cp %&gt;%\n  group_by(ENAME) %&gt;%\n  summarize(total_smart_bins = n())\n\n\n\n2.3 Road Data in Hong Kong\n\nroad_data &lt;- st_read(dsn = \"data/geospatial/china-latest-free.shp\", \n                     layer = \"gis_osm_roads_free_1\")\n\nTransform the Data into Hong Kong Projection System\n\nroad_data_2326 &lt;- st_transform(road_data, 2326)\n\n\nroads_in_hk &lt;- st_intersection(road_data_2326, sf_district_18)\n\n\nwrite_rds(roads_in_hk, \"data/rds/sf_roads_in_hk.rds\")\n\n\nroads_in_hk &lt;- read_rds(\"data/rds/sf_roads_in_hk.rds\")\n\n\n\n\n3. Visualizing Recycling Points in Hong Kong\n\npcp_map &lt;- tm_shape(private_collection_points_by_district) +\n  tm_fill(col = \"total_pcp\") +\n  tm_borders() +\n  tm_layout(legend.show = TRUE, main.title = \"Distribution of Private Collection Points by District\",main.title.position = \"center\", main.title.size = 0.75)+\n  tm_scale_bar()\n\n\nngo_cp_map &lt;- tm_shape(ngo_cp_by_district) +\n  tm_fill(col = \"total_ngo_cp\") +\n  tm_borders() +\n  tm_layout(legend.show = TRUE, main.title = \"Distribution of NGO Points by District\", main.title.position = \"center\", main.title.size = 0.75)+\n  tm_scale_bar()\n\n\nrecycling_spots_map &lt;- tm_shape(recycling_spots_by_district) +\n  tm_fill(col = \"total_recycling_spots\") +\n  tm_borders() +\n  tm_layout(legend.show = TRUE, main.title = \"Distribution of Recycling Spots by District\",main.title.position = \"center\", main.title.size = 0.75)+\n  tm_scale_bar()\n\n\nrecycling_bins_map &lt;- tm_shape(recycling_bins_by_district) +\n  tm_fill(col = \"total_recycling_bins\") +\n  tm_borders() +\n  tm_layout(legend.show = TRUE, main.title = \"Distribution of Recycling Bins by District\", main.title.position = \"center\", main.title.size = 0.75)+\n  tm_scale_bar()\n\n\nrecycling_stations_map &lt;- tm_shape(recycling_stations_by_district) +\n  tm_fill(col = \"total_recycling_stations\") +\n  tm_borders() +\n  tm_layout(legend.show = TRUE, main.title = \"Distribution of Recycling Stations by District\", main.title.position = \"center\", main.title.size = 0.75)+\n  tm_scale_bar()\n\n\nstreet_corner_shops_map &lt;- tm_shape(street_corner_shops_by_district) +\n  tm_fill(col = \"total_street_corner\") +\n  tm_borders() +\n  tm_layout(legend.show = TRUE,main.title = \"Distribution of Street Corner Shops by District\", main.title.position = \"center\", main.title.size = 0.75)+\n  tm_scale_bar()\n\n\nsmart_bin_map &lt;- tm_shape(smart_bins_by_district) +\n  tm_fill(col = \"total_smart_bins\") +\n  tm_borders() +\n  tm_layout(legend.show = TRUE,main.title = \"Distribution of Smart Bins by District\",main.title.position = \"center\", main.title.size = 0.75)+\n  tm_scale_bar()\n\n\ntmap_arrange(pcp_map,recycling_spots_map, recycling_bins_map,ngo_cp_map, recycling_stations_map, street_corner_shops_map, smart_bin_map, ncol=2, nrow = 4)\n\n\n\n\nSince we want to conduct a more accurate analysis on the recycling points, We will focus on the recycling facilities type with a higher number of data - Private Collection Points and Recycling Bins.\n\n3.1 Private Collection Points\n\nwm_q_pcp &lt;- private_collection_points_by_district %&gt;%\n  mutate(nb = st_contiguity(geometry, queen = TRUE),\n         wt = st_weights(nb,\n                         style = \"W\",\n                         allow_zero = TRUE),\n         .before = 1) \nwm_q_pcp\n\nSimple feature collection with 18 features and 4 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 801026 ymin: 801678 xmax: 863539.9 ymax: 846903.1\nProjected CRS: Hong Kong 1980 Grid System\n# A tibble: 18 × 5\n   nb        wt        ENAME             total_pcp                      geometry\n * &lt;nb&gt;      &lt;list&gt;    &lt;chr&gt;                 &lt;int&gt;            &lt;MULTIPOLYGON [m]&gt;\n 1 &lt;int [2]&gt; &lt;dbl [2]&gt; CENTRAL & WESTERN       414 (((833047.3 816838.9, 833488…\n 2 &lt;int [2]&gt; &lt;dbl [2]&gt; EASTERN                 200 (((843535.7 812736.3, 843530…\n 3 &lt;int [1]&gt; &lt;dbl [1]&gt; ISLANDS                  46 (((810029 801683.4, 810019.4…\n 4 &lt;int [5]&gt; &lt;dbl [5]&gt; KOWLOON CITY            243 (((836281 823326.3, 836283 8…\n 5 &lt;int [3]&gt; &lt;dbl [3]&gt; KWAI TSING               87 (((827834 820693.1, 827834 8…\n 6 &lt;int [3]&gt; &lt;dbl [3]&gt; KWUN TONG               119 (((843155.9 816368.9, 843154…\n 7 &lt;int [2]&gt; &lt;dbl [2]&gt; NORTH                    97 (((852615.5 841161.9, 852615…\n 8 &lt;int [4]&gt; &lt;dbl [4]&gt; SAI KUNG                163 (((840825.4 823785.4, 840827…\n 9 &lt;int [7]&gt; &lt;dbl [7]&gt; SHA TIN                 194 (((839924.4 832031.6, 839924…\n10 &lt;int [4]&gt; &lt;dbl [4]&gt; SHAM SHUI PO            190 (((834919.6 823272.4, 834921…\n11 &lt;int [3]&gt; &lt;dbl [3]&gt; SOUTHERN                181 (((830176.1 815000.2, 830255…\n12 &lt;int [5]&gt; &lt;dbl [5]&gt; TAI PO                  121 (((846104.6 830686.6, 846265…\n13 &lt;int [6]&gt; &lt;dbl [6]&gt; TSUEN WAN                92 (((821762.8 819430, 821765.7…\n14 &lt;int [2]&gt; &lt;dbl [2]&gt; TUEN MUN                165 (((811619.1 831909.9, 811639…\n15 &lt;int [3]&gt; &lt;dbl [3]&gt; WAN CHAI                198 (((838663.3 815002.8, 838700…\n16 &lt;int [4]&gt; &lt;dbl [4]&gt; WONG TAI SIN             82 (((836530.5 823327.5, 836533…\n17 &lt;int [2]&gt; &lt;dbl [2]&gt; YAU TSIM MONG           116 (((835145.2 817859.4, 835137…\n18 &lt;int [4]&gt; &lt;dbl [4]&gt; YUEN LONG               178 (((811708.8 831974.4, 811719…\n\n\n\nset.seed(1234)\nglobal_moran_perm(wm_q_pcp$total_pcp,\n                       wm_q_pcp$nb,\n                       wm_q_pcp$wt,\n                  zero.policy = TRUE,\n                  nsim = 999)\n\n\n    Monte-Carlo simulation of Moran I\n\ndata:  x \nweights: listw  \nnumber of simulations + 1: 1000 \n\nstatistic = 0.16065, observed rank = 934, p-value = 0.132\nalternative hypothesis: two.sided\n\n\n\nlisa_pcp &lt;- wm_q_pcp %&gt;% \n  mutate(local_moran = local_moran(\n    total_pcp, nb, wt, zero.policy = TRUE, nsim = 99),\n         .before = 1) %&gt;%\n  unnest(local_moran)\n\n\nlisa_sig_pcp &lt;- lisa_pcp  %&gt;%\n  filter(p_ii &lt; 0.05)\n\ntmap_mode(\"plot\")\ntm_shape(lisa_pcp) +\n  tm_polygons() +\n  tm_borders(alpha = 0.7) +\ntm_shape(lisa_pcp) +\n  tm_fill(\"mean\") + \n  tm_borders(alpha = 0.4)\n\n\n\n\n\n\n3.2 Recycling Bins\n\nwm_q_rbins &lt;- recycling_bins_by_district %&gt;%\n  mutate(nb = st_contiguity(geometry, queen = TRUE),\n         wt = st_weights(nb,\n                         style = \"W\",\n                         allow_zero = TRUE),\n         .before = 1) \nwm_q_rbins\n\nSimple feature collection with 18 features and 4 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 801026 ymin: 801678 xmax: 863539.9 ymax: 846903.1\nProjected CRS: Hong Kong 1980 Grid System\n# A tibble: 18 × 5\n   nb        wt        ENAME      total_recycling_bins                  geometry\n * &lt;nb&gt;      &lt;list&gt;    &lt;chr&gt;                     &lt;int&gt;        &lt;MULTIPOLYGON [m]&gt;\n 1 &lt;int [2]&gt; &lt;dbl [2]&gt; CENTRAL &…                   93 (((833047.3 816838.9, 83…\n 2 &lt;int [2]&gt; &lt;dbl [2]&gt; EASTERN                     177 (((843535.7 812736.3, 84…\n 3 &lt;int [1]&gt; &lt;dbl [1]&gt; ISLANDS                     219 (((810029 801683.4, 8100…\n 4 &lt;int [5]&gt; &lt;dbl [5]&gt; KOWLOON C…                   92 (((836281 823326.3, 8362…\n 5 &lt;int [3]&gt; &lt;dbl [3]&gt; KWAI TSING                  130 (((827834 820693.1, 8278…\n 6 &lt;int [3]&gt; &lt;dbl [3]&gt; KWUN TONG                   133 (((843155.9 816368.9, 84…\n 7 &lt;int [2]&gt; &lt;dbl [2]&gt; NORTH                       286 (((852615.5 841161.9, 85…\n 8 &lt;int [4]&gt; &lt;dbl [4]&gt; SAI KUNG                    302 (((840825.4 823785.4, 84…\n 9 &lt;int [7]&gt; &lt;dbl [7]&gt; SHA TIN                     214 (((839924.4 832031.6, 83…\n10 &lt;int [4]&gt; &lt;dbl [4]&gt; SHAM SHUI…                  110 (((834919.6 823272.4, 83…\n11 &lt;int [3]&gt; &lt;dbl [3]&gt; SOUTHERN                    115 (((830176.1 815000.2, 83…\n12 &lt;int [5]&gt; &lt;dbl [5]&gt; TAI PO                      282 (((846104.6 830686.6, 84…\n13 &lt;int [6]&gt; &lt;dbl [6]&gt; TSUEN WAN                   193 (((821762.8 819430, 8217…\n14 &lt;int [2]&gt; &lt;dbl [2]&gt; TUEN MUN                    195 (((811619.1 831909.9, 81…\n15 &lt;int [3]&gt; &lt;dbl [3]&gt; WAN CHAI                    121 (((838663.3 815002.8, 83…\n16 &lt;int [4]&gt; &lt;dbl [4]&gt; WONG TAI …                   60 (((836530.5 823327.5, 83…\n17 &lt;int [2]&gt; &lt;dbl [2]&gt; YAU TSIM …                  147 (((835145.2 817859.4, 83…\n18 &lt;int [4]&gt; &lt;dbl [4]&gt; YUEN LONG                   327 (((811708.8 831974.4, 81…\n\n\n\nset.seed(1234)\nglobal_moran_perm(wm_q_rbins$total_recycling_bins,\n                       wm_q_rbins$nb,\n                       wm_q_rbins$wt,\n                  zero.policy = TRUE,\n                  nsim = 999)\n\n\n    Monte-Carlo simulation of Moran I\n\ndata:  x \nweights: listw  \nnumber of simulations + 1: 1000 \n\nstatistic = 0.48951, observed rank = 998, p-value = 0.004\nalternative hypothesis: two.sided\n\n\n\nlisa_rbins &lt;- wm_q_rbins %&gt;% \n  mutate(local_moran = local_moran(\n    total_recycling_bins, nb, wt, zero.policy = TRUE, nsim = 99),\n         .before = 1) %&gt;%\n  unnest(local_moran)\n\n\nlisa_sig_rbins &lt;- lisa_rbins  %&gt;%\n  filter(p_ii &lt; 0.05)\n\ntmap_mode(\"plot\")\ntm_shape(lisa_rbins) +\n  tm_polygons() +\n  tm_borders(alpha = 0.7) +\ntm_shape(lisa_rbins) +\n  tm_fill(\"mean\") + \n  tm_borders(alpha = 0.4)\n\n\n\n\nConsidering the Hot-Spot Analysis on the Private Collection Points and Public Recycling bins, they are maininly locate far from the residential area. Therefore, we decide to refer to the census data in Hong Kong.\n\nggplot(hk_census, aes(x = DNAME, y = POPULATION)) +\n  geom_bar(stat = \"identity\", fill = \"steelblue\", color = \"black\") +\n  geom_text(aes(label = POPULATION), vjust = -0.5) +\n  theme_minimal() +\n  labs(title = \"Population by District\",\n       x = \"District Name\",\n       y = \"Population\") +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n\n\n\n\nSince Sha Tin has the most population, we will focus on Sha Tin district. Moreover, we want to choose another district with both commercial and residential area. Therefore, we will be analyzing on Yau Tsim Mong Area as well.\n\nsha_tin_recycling_points &lt;- cp_sf_1 %&gt;%\n  filter(district_id == \"SHA TIN\" & \n         (legend == \"Private Collection Points (e.g. housing estates, shopping centres)\" | legend == \"Recycling Bins at Public Place\"))\n\n\nytm_recycling_points &lt;- cp_sf_1 %&gt;%\n  filter(district_id == \"YAU TSIM MONG\" & \n         (legend == \"Private Collection Points (e.g. housing estates, shopping centres)\" | legend == \"Recycling Bins at Public Place\"))\n\n\nwanchai_recycling_points &lt;- cp_sf_1 %&gt;%\n  filter(district_id == \"WAN CHAI\" & \n         (legend == \"Private Collection Points (e.g. housing estates, shopping centres)\" | legend == \"Recycling Bins at Public Place\"))\n\n\n\n\n4. Sha Tin District\n\nshatin &lt;- sf_district_18 %&gt;%\n  filter(ENAME == \"SHA TIN\")\n\n\nplot(st_geometry((shatin)))\n\n\n\n\n\nroads_in_shatin &lt;- st_intersection(roads_in_hk, shatin)\n\n\nwrite_rds(roads_in_shatin, \"data/rds/roads_in_shatin.rds\")\n\n\nroads_in_shatin &lt;- read_rds(\"data/rds/roads_in_shatin.rds\")\n\n\nprivate_cp_shatin &lt;- st_intersection(private_collection_points, shatin)\n\n\npublic_cp_shatin &lt;- st_intersection(recycling_bins, shatin)\n\n\ncp_shatin &lt;- st_intersection(sha_tin_recycling_points, shatin)\n\n\nwrite_rds(private_cp_shatin, \"data/rds/private_cp_shatin.rds\")\n\n\nwrite_rds(public_cp_shatin, \"data/rds/public_cp_shatin.rds\")\n\n\nwrite_rds(cp_shatin, \"data/rds/cp_shatin.rds\")\n\n\nprivate_cp_shatin &lt;- read_rds(\"data/rds/private_cp_shatin.rds\")\n\n\npublic_cp_shatin &lt;- read_rds(\"data/rds/public_cp_shatin.rds\")\n\n\ncp_shatin &lt;- read_rds(\"data/rds/cp_shatin.rds\")\n\n\nplot(st_geometry(private_cp_shatin))\n\n\n\n\n\nplot(st_geometry(public_cp_shatin))\n\n\n\n\n\nplot(st_geometry(cp_shatin))\n\n\n\n\n\nunique_types &lt;- unique(st_geometry_type(roads_in_shatin))\nunique_types\n\n[1] POINT              GEOMETRYCOLLECTION LINESTRING         MULTILINESTRING   \n[5] MULTIPOINT        \n18 Levels: GEOMETRY POINT LINESTRING POLYGON MULTIPOINT ... TRIANGLE\n\n\n\nroads_in_shatin &lt;- roads_in_shatin %&gt;%\n  filter(st_geometry_type(geometry) %in% c(\"LINESTRING\", \"MULTILINESTRING\"))\n\n\nif (\"LINESTRING\" %in% unique_types) {\n  roads_in_shatin &lt;- st_cast(roads_in_shatin, \"LINESTRING\")\n} else {\n  # handle the case when no linestrings are found\n  stop(\"No linestrings found in roads_in_shatin\")\n}\n\n\ntmap_mode('plot')\ntm_shape(roads_in_shatin, geometry_type = \"lines\") + \n  tm_lines()\n\n\n\n\n\ntmap_mode('plot')\n\n# Plot roads\ntm_shape(roads_in_shatin, geometry_type = \"lines\") + \n  tm_lines(lwd = 1, col = \"blue\") +\n  \n  # Plot Punggol area boundary\n  tm_shape(shatin) +\n  tm_borders() +\n  \n  # Plot Grab origin data\n  tm_shape(private_cp_shatin) +\n  tm_dots()\n\n\n\n\n\ntmap_mode(\"view\")\n\n# Create the map using tmap\ncp_shatin_map &lt;- osm_basemap + \n  tm_shape(cp_shatin) +\n  tm_dots(col = \"legend\", palette = c(\"blue\", \"red\"), border.col = \"black\", size = 0.05) +\n  tm_layout(title = \"Recycling Bin Locations in Sha Tin\")\n\ncp_shatin_map\n\n\n\n\n\n\n\nroads_lines_shatin &lt;- roads_in_shatin[st_geometry_type(roads_in_shatin) == \"LINESTRING\", ]\n\n# Apply lixelize_lines with mindist\nlixels_shatin &lt;- lixelize_lines(roads_lines_shatin,5000, mindist = 2500)\n\n\nsamples_shatin &lt;- lines_center(roads_lines_shatin)\n\n\n4.1 Private Collection Points in Sha Tin\n\ndensities_shatin_private &lt;- nkde(roads_lines_shatin, \n                  events = private_cp_shatin,\n                  w = rep(1,nrow(private_cp_shatin)),\n                  samples = samples_shatin,\n                  kernel_name = \"quartic\",\n                  bw = 300, \n                  div= \"bw\", \n                  method = \"simple\", \n                  digits = 1, \n                  tol = 1,\n                  grid_shape = c(1,1), \n                  max_depth = 8,\n                  agg = 5, #we aggregate events within a 5m radius (faster calculation)\n                  sparse = TRUE,\n                  verbose = FALSE)\n\n\nsamples_shatin$density_private &lt;- densities_shatin_private\nlixels_shatin$density_private &lt;- densities_shatin_private\n\n\n# rescaling to help the mapping\nsamples_shatin$density_private &lt;- samples_shatin$density_private*1000\nlixels_shatin$density_private &lt;- lixels_shatin$density_private*1000\n\n\ntmap_mode('view')\n\nshatin_density_private &lt;- osm_basemap+\ntm_shape(lixels_shatin)+\n  tm_lines(col=\"density_private\")+\ntm_shape(private_cp_shatin)+\n  tm_dots()\n\nshatin_density_private\n\n\n\n\n\n\n\n\n4.2 Public Recycling Bins in Sha Tin\n\ndensities_shatin_public &lt;- nkde(roads_lines_shatin, \n                  events = public_cp_shatin,\n                  w = rep(1,nrow(public_cp_shatin)),\n                  samples = samples_shatin,\n                  kernel_name = \"quartic\",\n                  bw = 300, \n                  div= \"bw\", \n                  method = \"simple\", \n                  digits = 1, \n                  tol = 1,\n                  grid_shape = c(1,1), \n                  max_depth = 8,\n                  agg = 5, #we aggregate events within a 5m radius (faster calculation)\n                  sparse = TRUE,\n                  verbose = FALSE)\n\n\nsamples_shatin$density_public &lt;- densities_shatin_public\nlixels_shatin$density_public &lt;- densities_shatin_public\n\n\n# rescaling to help the mapping\nsamples_shatin$density_public &lt;- samples_shatin$density_public*1000\nlixels_shatin$density_public &lt;- lixels_shatin$density_public*1000\n\n\ntmap_mode('view')\n\n\nshatin_density_public &lt;- osm_basemap+\ntm_shape(lixels_shatin)+\n  tm_lines(col=\"density_public\")+\ntm_shape(public_cp_shatin)+\n  tm_dots()\n\nshatin_density_public\n\n\n\n\n\n\n\n\n4.3 Both Private and Public Bins in Sha Tin Districts\n\ndensities_shatin_ppcp &lt;- nkde(roads_lines_shatin, \n                  events = cp_shatin,\n                  w = rep(1,nrow(cp_shatin)),\n                  samples = samples_shatin,\n                  kernel_name = \"quartic\",\n                  bw = 300, \n                  div= \"bw\", \n                  method = \"simple\", \n                  digits = 1, \n                  tol = 1,\n                  grid_shape = c(1,1), \n                  max_depth = 8,\n                  agg = 5, #we aggregate events within a 5m radius (faster calculation)\n                  sparse = TRUE,\n                  verbose = FALSE)\n\n\nsamples_shatin$density_ppcp &lt;- densities_shatin_ppcp\nlixels_shatin$density_ppcp &lt;- densities_shatin_ppcp\n\n\n# rescaling to help the mapping\nsamples_shatin$density_ppcp &lt;- samples_shatin$density_ppcp*1000\nlixels_shatin$density_ppcp &lt;- lixels_shatin$density_ppcp*1000\n\n\ntmap_mode('view')\n\nshatin_density_ppcp &lt;- osm_basemap +\n  tm_shape(lixels_shatin) +\n  tm_lines(col = \"density_ppcp\") +\n  tm_shape(cp_shatin) +\n  tm_layout(\n    legend.position = c(\"left\", \"top\"),\n    legend.text.size = 0.5,  # Adjust this value as needed for smaller legend text\n    legend.title.size = 0.6  # Adjust this value as needed for smaller legend title\n  )+\n  tm_dots(col = \"legend\", palette = c(\"blue\", \"red\"), border.col = \"black\", size = 0.05) \n\nshatin_density_ppcp\n\n\n\n\n\n\n\n\n\n5. Yau Tsim Mong Area\n\nytm &lt;- sf_district_18 %&gt;%\n  filter(ENAME == \"YAU TSIM MONG\")\n\n\nplot(st_geometry((ytm)))\n\n\n\n\n\nroads_in_ytm &lt;- st_intersection(roads_in_hk, ytm)\n\n\nwrite_rds(roads_in_ytm, \"data/rds/roads_in_ytm.rds\")\n\n\nroads_in_ytm &lt;- read_rds(\"data/rds/roads_in_ytm.rds\")\n\n\nprivate_cp_ytm &lt;- st_intersection(private_collection_points, ytm)\n\n\npublic_cp_ytm &lt;- st_intersection(recycling_bins, ytm)\n\n\ncp_ytm &lt;- st_intersection(ytm_recycling_points, ytm)\n\n\nwrite_rds(private_cp_ytm, \"data/rds/private_cp_ytm.rds\")\n\n\nwrite_rds(public_cp_ytm, \"data/rds/public_cp_ytm.rds\")\n\n\nwrite_rds(cp_ytm, \"data/rds/cp_ytm.rds\")\n\n\nprivate_cp_ytm &lt;- read_rds(\"data/rds/private_cp_ytm.rds\")\n\n\npublic_cp_ytm &lt;- read_rds(\"data/rds/public_cp_ytm.rds\")\n\n\ncp_ytm &lt;-  read_rds(\"data/rds/cp_ytm.rds\")\n\n\nplot(st_geometry(private_cp_ytm))\n\n\n\n\n\nplot(st_geometry(public_cp_ytm))\n\n\n\n\n\nunique_types &lt;- unique(st_geometry_type(roads_in_ytm))\nunique_types\n\n[1] LINESTRING         MULTILINESTRING    POINT              GEOMETRYCOLLECTION\n18 Levels: GEOMETRY POINT LINESTRING POLYGON MULTIPOINT ... TRIANGLE\n\n\n\nroads_in_ytm &lt;- roads_in_ytm %&gt;%\n  filter(st_geometry_type(geometry) %in% c(\"LINESTRING\", \"MULTILINESTRING\"))\n\n\nif (\"LINESTRING\" %in% unique_types) {\n  roads_in_ytm &lt;- st_cast(roads_in_ytm, \"LINESTRING\")\n} else {\n  # handle the case when no linestrings are found\n  stop(\"No linestrings found in roads_in_ytm\")\n}\n\n\ntmap_mode('plot')\ntm_shape(roads_in_ytm, geometry_type = \"lines\") + \n  tm_lines()\n\n\n5.1 Private Collection Poitns in YTM\n\ntmap_mode('plot')\n\n# Plot roads\ntm_shape(roads_in_ytm, geometry_type = \"lines\") + \n  tm_lines(lwd = 1, col = \"blue\") +\n  \n  tm_shape(ytm) +\n  tm_borders() +\n\n  tm_shape(private_cp_ytm) +\n  tm_dots()\n\n\ntmap_mode(\"view\")\n\n# Create the map using tmap\ncp_ytm_map &lt;- osm_basemap + \n  tm_shape(cp_ytm) +\n  tm_dots(col = \"legend\", palette = c(\"blue\", \"red\"), border.col = \"black\", size = 0.05) +\n  tm_layout(title = \"Recycling Bin Locations in Yau Tsim Mong\")\n\ncp_shatin_map\n\n\n\n\n\n\n\nroads_lines_ytm &lt;- roads_in_ytm[st_geometry_type(roads_in_ytm) == \"LINESTRING\", ]\n\n# Apply lixelize_lines with mindist\nlixels_ytm &lt;- lixelize_lines(roads_lines_ytm,5000, mindist = 2500)\n\n\nsamples_ytm &lt;- lines_center(lixels_ytm)\n\n\ndensities_ytm_private &lt;- nkde(roads_lines_ytm, \n                  events = private_cp_ytm,\n                  w = rep(1,nrow(private_cp_ytm)),\n                  samples = samples_ytm,\n                  kernel_name = \"quartic\",\n                  bw = 300, \n                  div= \"bw\", \n                  method = \"simple\", \n                  digits = 1, \n                  tol = 1,\n                  grid_shape = c(1,1), \n                  max_depth = 8,\n                  agg = 5, #we aggregate events within a 5m radius (faster calculation)\n                  sparse = TRUE,\n                  verbose = FALSE)\n\n\nsamples_ytm$density_private &lt;- densities_ytm_private\nlixels_ytm$density_private &lt;- densities_ytm_private\n\n\n# rescaling to help the mapping\nsamples_ytm$density_private &lt;- samples_ytm$density_private*1000\nlixels_ytm$density_private &lt;- lixels_ytm$density_private*1000\n\n\ntmap_mode('view')\n\nytm_density_private &lt;- osm_basemap + \n  tm_shape(lixels_ytm)+\n  tm_lines(col=\"density_private\")+\ntm_shape(private_cp_ytm)+\n  tm_dots()\n\nytm_density_private\n\n\n\n\n\n\n\n\n5.2 Public Recycling Bins in YTM\n\ndensities_ytm_public &lt;- nkde(roads_lines_ytm, \n                  events = public_cp_ytm,\n                  w = rep(1,nrow(public_cp_ytm)),\n                  samples = samples_ytm,\n                  kernel_name = \"quartic\",\n                  bw = 300, \n                  div= \"bw\", \n                  method = \"simple\", \n                  digits = 1, \n                  tol = 1,\n                  grid_shape = c(1,1), \n                  max_depth = 8,\n                  agg = 5, #we aggregate events within a 5m radius (faster calculation)\n                  sparse = TRUE,\n                  verbose = FALSE)\n\n\nsamples_ytm$density_public &lt;- densities_ytm_public\nlixels_ytm$density_public &lt;- densities_ytm_public\n\n\n# rescaling to help the mapping\nsamples_ytm$density_public &lt;- samples_ytm$density_public*1000\nlixels_ytm$density_public &lt;- lixels_ytm$density_public*1000\n\n\ntmap_mode('view')\n\nytm_density_public &lt;-osm_basemap + \ntm_shape(lixels_ytm)+\n  tm_lines(col=\"density_public\")+\ntm_shape(private_cp_ytm)+\n  tm_dots()\n\nytm_density_public\n\n\n\n\n\n\n\n\n5.3 Both Public and Private Recycling Bins in YTM\n\ndensities_ytm_ppcp &lt;- nkde(roads_lines_ytm, \n                  events = cp_ytm,\n                  w = rep(1,nrow(cp_ytm)),\n                  samples = samples_ytm,\n                  kernel_name = \"quartic\",\n                  bw = 300, \n                  div= \"bw\", \n                  method = \"simple\", \n                  digits = 1, \n                  tol = 1,\n                  grid_shape = c(1,1), \n                  max_depth = 8,\n                  agg = 5, #we aggregate events within a 5m radius (faster calculation)\n                  sparse = TRUE,\n                  verbose = FALSE)\n\n\nsamples_ytm$density_ppcp &lt;- densities_ytm_ppcp\nlixels_ytm$density_ppcp &lt;- densities_ytm_ppcp\n\n\n# rescaling to help the mapping\nsamples_ytm$density_ppcp &lt;- samples_ytm$density_ppcp*1000\nlixels_ytm$density_ppcp &lt;- lixels_ytm$density_ppcp*1000\n\n\ntmap_mode('view')\n\nytm_density_ppcp &lt;-osm_basemap + \n  tm_shape(lixels_ytm)+\n  tm_lines(col=\"density_ppcp\")+\n  tm_shape(cp_ytm)+\n  tm_dots(col = \"legend\", palette = c(\"blue\", \"red\"), border.col = \"black\", size = 0.05)\n  \n\nytm_density_ppcp\n\n\n\n\n\n\n\n\n\n6. Wan Chai (Hong Kong Island)\n\nwanchai &lt;- sf_district_18 %&gt;%\n  filter(ENAME == \"WAN CHAI\")\n\n\nplot(st_geometry((wanchai)))\n\n\n\n\n\nroads_in_wanchai &lt;- st_intersection(roads_in_hk, wanchai)\n\n\nwrite_rds(roads_in_wanchai, \"data/rds/roads_in_wanchai.rds\")\n\n\nroads_in_wanchai &lt;- read_rds(\"data/rds/roads_in_wanchai.rds\")\n\n\nprivate_cp_wanchai &lt;- st_intersection(private_collection_points, wanchai)\n\n\npublic_cp_wanchai&lt;- st_intersection(recycling_bins, wanchai)\n\n\ncp_wanchai &lt;- st_intersection(wanchai_recycling_points, wanchai)\n\n\nwrite_rds(private_cp_wanchai, \"data/rds/private_cp_wanchai.rds\")\n\n\nwrite_rds(public_cp_wanchai, \"data/rds/public_cp_wanchai.rds\")\n\n\nwrite_rds(cp_wanchai, \"data/rds/cp_wanchai.rds\")\n\n\nprivate_cp_wanchai &lt;- read_rds(\"data/rds/private_cp_wanchai.rds\")\n\n\npublic_cp_wanchai &lt;- read_rds(\"data/rds/public_cp_wanchai.rds\")\n\n\ncp_wanchai &lt;- read_rds(\"data/rds/cp_wanchai.rds\")\n\n\nplot(st_geometry(private_cp_wanchai))\n\n\n\n\n\nplot(st_geometry(cp_wanchai))\n\n\n\n\n\nunique_types &lt;- unique(st_geometry_type(roads_in_wanchai))\nunique_types\n\n[1] GEOMETRYCOLLECTION POINT              LINESTRING         MULTIPOINT        \n[5] MULTILINESTRING   \n18 Levels: GEOMETRY POINT LINESTRING POLYGON MULTIPOINT ... TRIANGLE\n\n\n\nroads_in_wanchai &lt;- roads_in_wanchai %&gt;%\n  filter(st_geometry_type(geometry) %in% c(\"LINESTRING\", \"MULTILINESTRING\"))\n\n\nif (\"LINESTRING\" %in% unique_types) {\n  roads_in_wanchai &lt;- st_cast(roads_in_wanchai, \"LINESTRING\")\n} else {\n  # handle the case when no linestrings are found\n  stop(\"No linestrings found in roads_in_ytm\")\n}\n\n\ntmap_mode('plot')\ntm_shape(roads_in_wanchai, geometry_type = \"lines\") + \n  tm_lines()\n\n\n6.3 Both Private and Public Bins in Wan Chai Districts\n\nroads_lines_wanchai &lt;- roads_in_wanchai[st_geometry_type(roads_in_wanchai) == \"LINESTRING\", ]\n\n# Apply lixelize_lines with mindist\nlixels_wanchai &lt;- lixelize_lines(roads_lines_wanchai,5000, mindist = 2500)\n\n\nsamples_wanchai &lt;- lines_center(lixels_wanchai)\n\n\ndensities_wanchai_ppcp &lt;- nkde(roads_lines_wanchai, \n                  events = cp_wanchai,\n                  w = rep(1,nrow(cp_wanchai)),\n                  samples = samples_wanchai,\n                  kernel_name = \"quartic\",\n                  bw = 300, \n                  div= \"bw\", \n                  method = \"simple\", \n                  digits = 1, \n                  tol = 1,\n                  grid_shape = c(1,1), \n                  max_depth = 8,\n                  agg = 5, #we aggregate events within a 5m radius (faster calculation)\n                  sparse = TRUE,\n                  verbose = FALSE)\n\n\nsamples_wanchai$density_ppcp &lt;- densities_wanchai_ppcp\nlixels_wanchai$density_ppcp &lt;- densities_wanchai_ppcp\n\n\n# rescaling to help the mapping\nsamples_wanchai$density_ppcp &lt;- samples_wanchai$density_ppcp*1000\nlixels_wanchai$density_ppcp &lt;- lixels_wanchai$density_ppcp*1000\n\n\ntmap_mode('view')\n\nwanchai_density_ppcp &lt;- osm_basemap +\n  tm_shape(lixels_wanchai) +\n  tm_lines(col = \"density_ppcp\") +\n  tm_shape(cp_wanchai) +\n  tm_layout(\n    legend.position = c(\"left\", \"top\"),\n    legend.text.size = 0.5,  # Adjust this value as needed for smaller legend text\n    legend.title.size = 0.6  # Adjust this value as needed for smaller legend title\n  )+\n  tm_dots(col = \"legend\", palette = c(\"blue\", \"red\"), border.col = \"black\", size = 0.05) \n\nwanchai_density_ppcp"
  },
  {
    "objectID": "deliverables.html#research-paper",
    "href": "deliverables.html#research-paper",
    "title": "Project Deliverables",
    "section": "2. Research Paper",
    "text": "2. Research Paper"
  },
  {
    "objectID": "deliverables.html#r-shiny-application",
    "href": "deliverables.html#r-shiny-application",
    "title": "Project Deliverables",
    "section": "3. R Shiny Application",
    "text": "3. R Shiny Application"
  },
  {
    "objectID": "deliverables.html#poster",
    "href": "deliverables.html#poster",
    "title": "Project Deliverables",
    "section": "5. Poster",
    "text": "5. Poster"
  },
  {
    "objectID": "deliverables.html#user-guide-of-shiny-application",
    "href": "deliverables.html#user-guide-of-shiny-application",
    "title": "Project Deliverables",
    "section": "4. User Guide of Shiny Application",
    "text": "4. User Guide of Shiny Application"
  }
]